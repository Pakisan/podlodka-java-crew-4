asyncapi: 3.0.0
info:
  title: Springwolf example project - AMQP
  version: 1.0.0
  description: Springwolf example project to demonstrate springwolfs abilities
  contact:
    name: springwolf
    url: https://github.com/springwolf/springwolf-core
    email: example@example.com
    x-phone: "+49 123 456789"
  license:
    name: Apache License 2.0
    x-desc: some description
  x-api-audience: company-internal
  x-generator: springwolf
defaultContentType: application/json
servers:
  amqp:
    host: amqp:5672
    protocol: amqp
channels:
  another-queue:
    messages:
      com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto:
        "$ref": "#/components/messages/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"
    bindings:
      amqp:
        is: queue
        queue:
          name: another-queue
          durable: false
          exclusive: false
          autoDelete: false
          vhost: "/"
        bindingVersion: 0.3.0
  example-producer-channel-publisher:
    messages:
      com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto:
        "$ref": "#/components/messages/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"
  example-queue:
    messages:
      com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto:
        "$ref": "#/components/messages/com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto"
    bindings:
      amqp:
        is: queue
        queue:
          name: example-queue
          durable: false
          exclusive: false
          autoDelete: false
          vhost: "/"
        bindingVersion: 0.3.0
  example-topic-routing-key:
    messages:
      com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto:
        "$ref": "#/components/messages/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: example-bindings-exchange-name
          type: topic
          durable: true
          autoDelete: false
          vhost: "/"
        bindingVersion: 0.3.0
  multi-payload-queue:
    messages:
      com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto:
        "$ref": "#/components/messages/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"
      com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto:
        "$ref": "#/components/messages/com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto"
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: example-topic-exchange
          type: topic
          durable: true
          autoDelete: false
          vhost: "/"
        bindingVersion: 0.3.0
components:
  schemas:
    HeadersNotDocumented:
      type: object
      properties: {}
      examples:
        - {}
    com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto:
      type: object
      properties:
        example:
          "$ref": "#/components/schemas/com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto"
        foo:
          type: string
          description: Foo field
          examples:
            - bar
      description: Another payload model
      examples:
        - example:
            someEnum: FOO2
            someLong: 5
            someString: some string value
          foo: bar
      required:
        - example
    com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto:
      type: object
      properties:
        someEnum:
          type: string
          description: Some enum field
          enum:
            - FOO1
            - FOO2
            - FOO3
          examples:
            - FOO2
        someLong:
          type: integer
          description: Some long field
          format: int64
          examples:
            - 5
        someString:
          type: string
          description: Some string field
          examples:
            - some string value
      description: Example payload model
      examples:
        - someEnum: FOO2
          someLong: 5
          someString: some string value
      required:
        - someEnum
        - someString
  messages:
    com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto:
      headers:
        "$ref": "#/components/schemas/HeadersNotDocumented"
      payload:
        schemaFormat: application/vnd.aai.asyncapi+json;version=3.0.0
        schema:
          "$ref": "#/components/schemas/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"
      name: com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto
      title: AnotherPayloadDto
      description: Another payload model
      bindings:
        amqp:
          bindingVersion: 0.3.0
    com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto:
      headers:
        "$ref": "#/components/schemas/HeadersNotDocumented"
      payload:
        schemaFormat: application/vnd.aai.asyncapi+json;version=3.0.0
        schema:
          "$ref": "#/components/schemas/com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto"
      name: com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto
      title: ExamplePayloadDto
      bindings:
        amqp:
          bindingVersion: 0.3.0
operations:
  another-queue_receive_receiveAnotherPayload:
    action: receive
    channel:
      "$ref": "#/channels/another-queue"
    bindings:
      amqp:
        expiration: 0
        cc:
          - another-queue
        bindingVersion: 0.3.0
    messages:
      - "$ref": "#/channels/another-queue/messages/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"
  example-producer-channel-publisher_send_sendMessage:
    action: send
    channel:
      "$ref": "#/channels/example-producer-channel-publisher"
    title: example-producer-channel-publisher_send
    description: Custom, optional description defined in the AsyncPublisher annotation
    bindings:
      amqp:
        expiration: 0
        cc: []
        priority: 0
        deliveryMode: 1
        mandatory: false
        timestamp: false
        ack: false
        bindingVersion: 0.3.0
    messages:
      - "$ref": "#/channels/example-producer-channel-publisher/messages/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"
  example-queue_receive_receiveExamplePayload:
    action: receive
    channel:
      "$ref": "#/channels/example-queue"
    bindings:
      amqp:
        expiration: 0
        cc:
          - example-queue
        bindingVersion: 0.3.0
    messages:
      - "$ref": "#/channels/example-queue/messages/com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto"
  example-topic-routing-key_receive_bindingsExample:
    action: receive
    channel:
      "$ref": "#/channels/example-topic-routing-key"
    bindings:
      amqp:
        expiration: 0
        cc:
          - example-topic-routing-key
        bindingVersion: 0.3.0
    messages:
      - "$ref": "#/channels/example-topic-routing-key/messages/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"
  multi-payload-queue_receive_bindingsBeanExample:
    action: receive
    channel:
      "$ref": "#/channels/multi-payload-queue"
    bindings:
      amqp:
        expiration: 0
        cc:
          - example-topic-routing-key
        bindingVersion: 0.3.0
    messages:
      - "$ref": "#/channels/multi-payload-queue/messages/com.github.pakisan.podlodkajavacrew4.dtos.ExamplePayloadDto"
      - "$ref": "#/channels/multi-payload-queue/messages/com.github.pakisan.podlodkajavacrew4.dtos.AnotherPayloadDto"